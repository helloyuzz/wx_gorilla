@page
@using com.wechat.gorilla
@model com.wechat.gorilla.Pages.Users.IndexModel

@{
    ViewData["Title"] = "Index";
}

<div class="transprantBackground">
    @*<p class="page_title">员工列表</p>*@
    <div class="row">
        <div class="col-4">
            <ul id="browser" class="filetree treeview-famfamfam">
               @*@Model.OrgMenuItem.HtmlContent*@
                <li>
                    <span class="folder">Item 1.1</span>
                    <ul>
                        <li><span class="file">Item 1.1.1</span></li>
                    </ul>
                </li>
                <li>
                    <span class="folder">Folder 2</span>
                    <ul>
                        <li>
                            <span class="folder">Subfolder 2.1</span>
                            <ul id="folder21">
                                <li><span class="file">File 2.1.1</span></li>
                                <li><span class="file">File 2.1.2</span></li>
                            </ul>
                        </li>
                        <li>
                            <span class="folder">Subfolder 2.2</span>
                            <ul>
                                <li><span class="file">File 2.2.1</span></li>
                                <li><span class="file">File 2.2.2</span></li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li class="closed">
                    <span class="folder">Folder 3 (closed at start)</span>
                    <ul>
                        <li><span class="file">File 3.1</span></li>
                    </ul>
                </li>
                <li><span class="file">File 4</span></li>
            </ul>
        </div>
        <div class="col">
            <p>
                <a class="btn btn-primary" asp-page="Create" asp-route-type="@Model.ViewType">Create New</a>
            </p>
            <table class="table">
                <thead>
                    <tr>
                        <th>
                            @Html.DisplayNameFor(model => model.User[0].User_account)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.User[0].User_type)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.User[0].Projectid)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.User[0].Departmentid)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.User[0].wx_unique_id)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.User[0].Roleid)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.User[0].User_password)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.User[0].Login_time)
                        </th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model.User) {
                        <tr>
                            <td>
                                @Html.DisplayFor(modelItem => item.User_account)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.User_type)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Projectid)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Departmentid)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.wx_unique_id)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Roleid)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.User_password)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Login_time)
                            </td>
                            <td>
                                <a asp-page="./Edit" asp-route-id="@item.Id">Edit</a> |
                                <a asp-page="./Details" asp-route-id="@item.Id">Details</a> |
                                <a asp-page="./Delete" asp-route-id="@item.Id">Delete</a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        $("#browser").treeview({
            toggle: function () {
                console.log("%s was toggled.", $(this).find(">span").text());
            }
        });

        $("#add").click(function () {
            var branches = $("<li><span class='folder'>New Sublist</span><ul>" +
                "<li><span class='file'>Item1</span></li>" +
                "<li><span class='file'>Item2</span></li></ul></li>").appendTo("#browser");
            $("#browser").treeview({
                add: branches
            });
        });
    });
</script>